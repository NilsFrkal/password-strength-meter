{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\nimport { zxcvbn } from 'zxcvbn3';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nlet PasswordStrengthMeterService = /*#__PURE__*/(() => {\n  class PasswordStrengthMeterService {\n    constructor() {}\n    /**\r\n     *  this will return the password strength score in number\r\n     *  0 - too guessable\r\n     *  1 - very guessable\r\n     *  2 - somewhat guessable\r\n     *  3 - safely unguessable\r\n     *  4 - very unguessable\r\n     *\r\n     *  @param password - Password\r\n     */\n\n\n    score(password) {\n      const result = zxcvbn(password);\n      return result.score;\n    }\n    /**\r\n     * this will return the password strength score with feedback messages\r\n     * return type { score: number; feedback: { suggestions: string[]; warning: string } }\r\n     *\r\n     * @param password - Password\r\n     */\n\n\n    scoreWithFeedback(password) {\n      const result = zxcvbn(password);\n      return {\n        score: result.score,\n        feedback: result.feedback\n      };\n    }\n\n  }\n\n  PasswordStrengthMeterService.ɵfac = function PasswordStrengthMeterService_Factory(t) {\n    return new (t || PasswordStrengthMeterService)();\n  };\n\n  PasswordStrengthMeterService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PasswordStrengthMeterService,\n    factory: PasswordStrengthMeterService.ɵfac\n  });\n  return PasswordStrengthMeterService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nfunction PasswordStrengthMeterComponent_ng_container_3_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.feedback.warning, \" \");\n  }\n}\n\nfunction PasswordStrengthMeterComponent_ng_container_3_small_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const suggetion_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(suggetion_r4);\n  }\n}\n\nfunction PasswordStrengthMeterComponent_ng_container_3_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 6);\n    i0.ɵɵtemplate(1, PasswordStrengthMeterComponent_ng_container_3_small_2_ng_container_1_Template, 2, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.feedback.suggestions);\n  }\n}\n\nfunction PasswordStrengthMeterComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PasswordStrengthMeterComponent_ng_container_3_small_1_Template, 2, 1, \"small\", 3);\n    i0.ɵɵtemplate(2, PasswordStrengthMeterComponent_ng_container_3_small_2_Template, 2, 1, \"small\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.feedback.warning);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.feedback.suggestions && ctx_r0.feedback.suggestions.length > 0);\n  }\n}\n\nlet PasswordStrengthMeterComponent = /*#__PURE__*/(() => {\n  class PasswordStrengthMeterComponent {\n    constructor(passwordStrengthMeterService) {\n      this.passwordStrengthMeterService = passwordStrengthMeterService;\n      this.minPasswordLength = 8;\n      this.enableFeedback = false;\n      this.colors = [];\n      this.strengthChange = new EventEmitter();\n      this.passwordStrength = null;\n      this.feedback = null;\n      this.prevPasswordStrength = null;\n      this.defaultColours = ['darkred', 'orangered', 'orange', 'yellowgreen', 'green'];\n    }\n\n    ngOnInit() {}\n\n    ngOnChanges(changes) {\n      if (changes.password) {\n        this.calculatePasswordStrength();\n      }\n    }\n\n    calculatePasswordStrength() {\n      // TODO validation logic optimization\n      if (!this.password) {\n        this.passwordStrength = null;\n        this.feedback = null;\n      } else if (this.password && this.password.length < this.minPasswordLength) {\n        this.passwordStrength = 0;\n        this.feedback = null;\n      } else {\n        if (this.enableFeedback) {\n          const result = this.passwordStrengthMeterService.scoreWithFeedback(this.password);\n          this.passwordStrength = result.score;\n          this.feedback = result.feedback;\n        } else {\n          this.passwordStrength = this.passwordStrengthMeterService.score(this.password);\n          this.feedback = null;\n        }\n      } // Only emit the passwordStrength if it changed\n\n\n      if (this.prevPasswordStrength !== this.passwordStrength) {\n        this.strengthChange.emit(this.passwordStrength);\n        this.prevPasswordStrength = this.passwordStrength;\n      }\n    }\n\n    getMeterFillColor(strength) {\n      if (!strength || strength < 0 || strength > 5) {\n        return this.colors[0] ? this.colors[0] : this.defaultColours[0];\n      }\n\n      return this.colors[strength] ? this.colors[strength] : this.defaultColours[strength];\n    }\n\n  }\n\n  PasswordStrengthMeterComponent.ɵfac = function PasswordStrengthMeterComponent_Factory(t) {\n    return new (t || PasswordStrengthMeterComponent)(i0.ɵɵdirectiveInject(PasswordStrengthMeterService));\n  };\n\n  PasswordStrengthMeterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PasswordStrengthMeterComponent,\n    selectors: [[\"password-strength-meter\"]],\n    inputs: {\n      password: \"password\",\n      minPasswordLength: \"minPasswordLength\",\n      enableFeedback: \"enableFeedback\",\n      colors: \"colors\"\n    },\n    outputs: {\n      strengthChange: \"strengthChange\"\n    },\n    features: [i0.ɵɵProvidersFeature([PasswordStrengthMeterService]), i0.ɵɵNgOnChangesFeature],\n    decls: 4,\n    vars: 4,\n    consts: [[1, \"strength-meter\"], [1, \"strength-meter-fill\"], [4, \"ngIf\"], [\"class\", \"password-feedback\", 4, \"ngIf\"], [\"class\", \"password-suggetion\", 4, \"ngIf\"], [1, \"password-feedback\"], [1, \"password-suggetion\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function PasswordStrengthMeterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelement(2, \"div\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, PasswordStrengthMeterComponent_ng_container_3_Template, 3, 2, \"ng-container\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"background\", ctx.getMeterFillColor(ctx.passwordStrength));\n        i0.ɵɵattribute(\"data-strength\", ctx.passwordStrength);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.enableFeedback && ctx.feedback);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf],\n    styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.strength-meter[_ngcontent-%COMP%]{position:relative;height:3px;background:#ddd;margin:10px auto;border-radius:3px}.strength-meter[_ngcontent-%COMP%]:before, .strength-meter[_ngcontent-%COMP%]:after{content:\\\"\\\";height:inherit;background:transparent;display:block;border-color:#fff;border-style:solid;border-width:0 5px 0 5px;position:absolute;width:calc((100% - 20px)/5 + 10px);z-index:10}.strength-meter[_ngcontent-%COMP%]:before{left:calc((100% - 20px)/5)}.strength-meter[_ngcontent-%COMP%]:after{right:calc((100% - 20px)/5)}.strength-meter-fill[_ngcontent-%COMP%]{background:transparent;height:inherit;position:absolute;width:0;border-radius:inherit;transition:width .5s ease-in-out,background .25s}.strength-meter-fill[data-strength=\\\"0\\\"][_ngcontent-%COMP%]{background:darkred;width:20%}.strength-meter-fill[data-strength=\\\"1\\\"][_ngcontent-%COMP%]{background:orangered;width:40%}.strength-meter-fill[data-strength=\\\"2\\\"][_ngcontent-%COMP%]{background:orange;width:60%}.strength-meter-fill[data-strength=\\\"3\\\"][_ngcontent-%COMP%]{background:yellowgreen;width:80%}.strength-meter-fill[data-strength=\\\"4\\\"][_ngcontent-%COMP%]{background:green;width:100%}.password-feedback[_ngcontent-%COMP%], .password-suggetion[_ngcontent-%COMP%]{font-size:70%;font-weight:400;color:#6c757d!important;display:block;margin-top:.25rem}\"]\n  });\n  return PasswordStrengthMeterComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet PasswordStrengthMeterModule = /*#__PURE__*/(() => {\n  class PasswordStrengthMeterModule {}\n\n  PasswordStrengthMeterModule.ɵfac = function PasswordStrengthMeterModule_Factory(t) {\n    return new (t || PasswordStrengthMeterModule)();\n  };\n\n  PasswordStrengthMeterModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: PasswordStrengthMeterModule\n  });\n  PasswordStrengthMeterModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return PasswordStrengthMeterModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(PasswordStrengthMeterModule, {\n    declarations: [PasswordStrengthMeterComponent],\n    imports: [CommonModule],\n    exports: [PasswordStrengthMeterComponent]\n  });\n})();\n/*\r\n * Public API Surface of password-strength-meter\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { PasswordStrengthMeterComponent, PasswordStrengthMeterModule, PasswordStrengthMeterService }; //# sourceMappingURL=angular-password-strength-meter.mjs.map","map":null,"metadata":{},"sourceType":"module"}